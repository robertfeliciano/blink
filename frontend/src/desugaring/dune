(rule
 (target llvm_libs.sexp)
 (action
  (with-stdout-to %{target}
   (bash "echo \"($(llvm-config --ldflags --libs --system-libs))\""))))

(library
 (name desugaring)
 (public_name blink.desugaring)
 (preprocess
  (pps ppx_deriving.show))
 (libraries core typing util fmt zarith)
 (foreign_archives ../../lib/convert)
 (modes byte native)
 (c_library_flags
  (:standard
   -lstdc++
   (:include llvm_libs.sexp)))) ;; Include the generated file here